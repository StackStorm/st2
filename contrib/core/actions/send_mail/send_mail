#!/bin/bash

HOSTNAME=$(hostname -f)
FROM="stanley@${HOSTNAME}"
SENDMAIL=`which sendmail`
MAIL="$SENDMAIL -t"
FOOTER="This message was generated by Stanley Action `basename $0` running on `hostname`"
TO=$1
shift
SUBJECT=$1
shift
BODY="$@"

${MAIL} <<EOF
TO: ${TO}
FROM: ${FROM}
SUBJECT: ${SUBJECT}
Content-Type: text/html

${BODY}
<br><br>
${FOOTER}

EOF

if [ $? -ne 0 ]; then
  echo "Failed to send mail to ${TO}"
  exit 2
else
  echo "Successfully sent mail to ${TO}"
  exit 0
fi
